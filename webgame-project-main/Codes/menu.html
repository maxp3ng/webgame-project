<!DOCTYPE html>
<html lang="en">

    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title> webgame project </title>
    </head>

    <body>
        
        <script type="module">

            // import kaboom lib
            import kaboom from "https://unpkg.com/kaboom/dist/kaboom.mjs";
            
            //palette colors
            let color1 = [244, 241, 222]
            let color2 = [224, 122, 95]
            let color3 = [61, 64, 91]
            let color4 = [129, 178, 154]
            let color5 = [242, 204, 143]
           
            // initialize kaboom context
            kaboom();

            //loadSound("theme", "sounds/theme.mp3");
            //const music = play("theme", {
                //volume: 1,
                //loop:true
            //})
            
        scene('start', () => {
            //music.play()
            add([
            color(color2),
             rect(width(), height()),
             pos(0, 0),
             outline(4),
            ])

            add([
            color(color4),
            text("Jajanken Tower"),
            pos(width()/2 - 300, height()/2 - 250),
            ])
            
            const start_button = add([
            color(color5),
            text("Start", {
                size:50,
            }),
            pos(width()/2 - 75, height()/2-125),
            area(),
            ])
            start_button.onClick(() => go("game_menu"))
            

            const setting_button = add([
            color(color1),
            text("Settings", {
                size:50,
            }),
            pos(width()/2 - 115, height()/2 - 50),
            area(),            
            ])
            setting_button.onClick(() => go("settings_menu"))

            const credit_button = add([
            color(color3),
            text("Credits", {
                size:50,
            }),
            pos(width()/2 - 100, height()/2 + 25),
            area(),            
            ])
            credit_button.onClick(() => go("credit_menu"))
        })
        
        scene("game_menu", () => {
            add([
            color(color4),
             rect(width(), height()),
             pos(0, 0),
             outline(4),
            ])
        });

        scene("settings_menu", () => {
            add([
            color(color5),
             rect(width(), height()),
             pos(0, 0),
             outline(4),
            ])

            add([
            pos(100, 50),
            text("Choose your difficulty", {
                size:75,
            }),
            ])


            
            const easy_button_template = [
            color(color1),
             rect(200, 100),
             pos(100, 250),
             outline(4),    
            ]
            const easy_mode_template = [
            color(color4),
            text("Easy", {
                size:75,
            }),
            pos(110, 260),
            area(),            
            ]

            const medium_button_template = [
            color(color3),
             rect(300, 100),
             pos(450, 250),
             outline(4),    
            ]
            const medium_mode_template = [
            color(color1),
            text("Medium", {
                size:75,
            }),
            pos(460, 260),
            area(),            
            ]

            const hard_button_template = [
            color(color2),
             rect(200, 100),
             pos(925, 250),
             outline(4),    
            ]
            const hard_mode_template = [
            color(color3),
            text("Hard", {
                size:75,
            }),
            pos(935, 260),
            area(),            
            ]


            let easy_button = add(easy_button_template)
            let easy_mode = add(easy_mode_template)

            let medium_button = add(medium_button_template)
            let medium_mode = add(medium_mode_template)

            let hard_button = add(hard_button_template)
            let hard_mode = add(hard_mode_template)

            let difficulty = 0;

            function changeDifficulty(difficulty){ 
                console.log(difficulty);
                if(difficulty == 1){
                    //easy
                    destroy(easy_button)
                    destroy(medium_button)
                    destroy(hard_button)
                    easy_button = add(easy_button_template)
                    easy_mode = add(easy_mode_template)
                }
                else if(difficulty == 2){
                    //medium
                    destroy(easy_button)
                    destroy(medium_button)
                    destroy(hard_button)
                    medium_button = add(medium_button_template)
                    medium_mode = add(medium_mode_template)
                }
                else if(difficulty == 3){
                    //hard
                    destroy(easy_button)
                    destroy(medium_button)
                    destroy(hard_button)
                    hard_button = add(hard_button_template)
                    hard_mode = add(hard_mode_template)
                }
            }

            easy_mode.onClick(() => {
                if (difficulty != 1) {
                difficulty = 1;
                changeDifficulty(difficulty);
                }
            })

            medium_mode.onClick(() => {
                if (difficulty != 2) {
                difficulty = 2;
                changeDifficulty(difficulty);
                }
            })

            hard_mode.onClick(() => {
                if (difficulty != 3) {
                difficulty = 3;
                changeDifficulty(difficulty);
                }
            })
            
        });

        scene("credit_menu", () => {
            add([
            color(color3),
             rect(width(), height()),
             pos(0, 0),
             outline(4),
            ])

            add([
                pos(75,100),
                text("Thank you for playing!!!", {
                    size:75,
                }),
            ])

            add([
                pos(125, 200),
                text("Made by: Max Peng and Albert Kuo ", {
                    size:50,
                }),

            ])
        });

        //scene("how_to_menu", () => {
            //add([
            //color(color2),
             //rect(width(), height()),
             //pos(0, 0),
             //outline(4),
            //])
        //});

        //const play_button = add([
            //color(color1),
            //text("How to Play", {
                //size:50,
            //}),
            //pos(width()/2 - 160, height()/2 + 25),
            //area(),            
            //])
            //play_button.onClick(() => go("how_to_menu"))
        go('start');  
            </script>

        <script src="./app.js"></script>
    </body>

</html>